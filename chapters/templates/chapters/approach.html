{% extends 'chapters/topic.html' %}
{% load  chapters_extras %}


{% block header %}
  <h2>{{ topic }}</h2>
{% endblock header %}

{% block nav %}
<div style="height: 500px; overflow-y:auto; width: 90%;">
    <table style="max-height: 500px; overflow: auto;">
      <tbody>
        {% for topic in topics %}
        <tr>
            <td class="team">
                <a href="{% url 'chapters:approach' topic.id %}">{{ forloop.counter }}. {{ topic }}</a>
                <span class="badge badge-primary badge-pill ml-2 float-right">
                {% get_topic_points_tag topic user %}
                    /{{ topic.points }}</span>
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</div>
<div style="text-align: center; padding-top:10px;">
<span class="badge badge-light" style="font-size: 20px;">Points:</span>
  {% if user.profile.points > 0 %}
    <span class="badge badge-success" style="font-size: 20px;">{{ user.profile.points }}</span>
  {% else %}
    <span class="badge badge-danger" style="font-size: 20px;">{{ user.profile.points }}</span>
  {% endif %}
 </div>
{% endblock nav %}

{% block content %}

  <p>{{ topic.text|linebreaks }}</p>
  <div>
  <form action="{% url 'chapters:approach' topic.id %}" method="post">
      <div>
      {% csrf_token %}
      {{ form.as_p }}
        <script>
              var editor = CodeMirror.fromTextArea(document.getElementById('editor'), {
                    mode: "python",
                    theme: "base16-dark",
                    lineNumbers: true,
                    autoCloseBrackets: true,
                    lineWrapping: true
                });
                editor.setSize("auto", "400");
          </script>
      </div>

      <button name="submit" class="btn btn-info float-left">Uruchom</button>
  </form>
    {% if approach.points_awarded %}
        <a href="{% url 'chapters:approach' next_topic_id %}">
            <button class="btn btn-warning float-left ml-1" >NastÄ™pny temat</button>
        </a>
    {% endif %}
  </div>
{% endblock content %}

{% block result %}
    <div class="console">
  <header>
    <p>Terminal</p>
  </header>
  <div class="consolebody">
    <p >{{ res|linebreaks }}</p>
  </div>
</div>
{% endblock result %}